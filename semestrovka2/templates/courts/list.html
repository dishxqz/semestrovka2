{% extends "base.html" %}

{% block title %}–ö–æ—Ä—Ç—ã{% endblock %}

{% block extra_styles %}
<style>
    .container {
        max-width: 800px;
        margin: 0 auto;
    }
    .header {
        background: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        box-shadow: 0 0px 15px rgba(255, 105, 180, 0.6);
    }
    table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 0px 15px rgba(255, 105, 180, 0.3);
    }
    th, td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #ffd6e0;
    }
    th {
        background: #fff5f8;
        color: #333;
    }
    .btn {
        display: inline-block;
        padding: 8px 15px;
        background: #ff69b4;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        margin: 2px;
    }
    .btn:hover {
        background: #ff1493;
    }
    .btn-danger {
        background: #ff3366;
    }
    .admin-panel {
        background: #fff5f8;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        border: 2px solid #ff3366;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    {% if session.role == 'admin' %}
    <div class="admin-panel">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä—Ç</h3>
        <form method="POST" action="/court/create">
            <input type="text" name="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä—Ç–∞" required style="margin: 5px; padding: 8px;">
            <input type="text" name="location" placeholder="–ê–¥—Ä–µ—Å" required style="margin: 5px; padding: 8px;">
            <input type="number" name="price_per_hour" placeholder="–¶–µ–Ω–∞ –∑–∞ —á–∞—Å" required style="margin: 5px; padding: 8px;">
            <button type="submit" class="btn" style="background: #ff3366;">‚ûï</button>
        </form>
    </div>
    {% endif %}

    <table>
        <tr>
            <th>ID</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ê–¥—Ä–µ—Å</th>
            <th>–¶–µ–Ω–∞/—á–∞—Å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            <th>‚ù§Ô∏è</th>
        </tr>
        {% for court in courts %}
        <tr>
            <td>{{ court.id }}</td>
            <td>{{ court.name }}</td>
            <td>{{ court.location }}</td>
            <td>{{ court.price_per_hour }} —Ä—É–±.</td>
            <td>
                {% if session.user_id %}
                    <a href="/booking/create?court_id={{ court.id }}" class="btn">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
                {% else %}
                    <a href="/users/login" class="btn">–í–æ–π–¥–∏—Ç–µ –¥–ª—è –±—Ä–æ–Ω–∏</a>
                {% endif %}
            </td>
             <td>
                {% if session.user_id %}
                    <a href="/booking/create?court_id={{ court.id }}" class="btn">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
                    {% if session.role == 'admin' %}
                        <a href="/court/edit/{{ court.id }}" class="btn" style="background: #4CAF50;">‚úèÔ∏è</a>
                        <a href="/court/delete/{{ court.id }}" class="btn btn-danger"
                            onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∫–æ—Ä—Ç?')">üóëÔ∏è</a>
                    {% endif %}
                {% else %}
                     <a href="/users/login" class="btn">–í–æ–π–¥–∏—Ç–µ –¥–ª—è –±—Ä–æ–Ω–∏</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>

    {% if session.user_id and session.role != 'admin' %}
    <div style="margin-top: 20px; padding: 15px; background: #fff5f8; border-radius: 10px;">
        <p><strong>–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</strong> –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ—Ä—Ç, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.</p>
    </div>
    {% endif %}
</div>
{% endblock %}